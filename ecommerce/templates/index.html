{% extends "base.html" %}
{% block title %}Home{% endblock title %}
{% load static %}
{% block body %}
<!-- Hero Section -->
  <section id="hero" class="hero section dark-background">

    <img src="static/assets/img/apple-bg.jpeg" alt="" data-aos="fade-in">

    <div class="container text-center" data-aos="fade-up" data-aos-delay="100">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <h2>Welcome to D-Shop</h2>
          <p>Best Apple Store in Indonesia</p>
          <a href="/product" class="btn-get-started">Shop Now</a>
        </div>
      </div>
    </div>

  </section>
<!-- /Hero Section -->
  
<!-- About Section -->
<section id="about" class="about section">
  <!-- Section Title -->
  <div class="container section-title" data-aos="fade-up">
    <h2>About D-Shop</h2>
    <p><span>Discover</span> <span class="description-title">Our Story</span></p>
  </div>

  <div class="container">
    <div class="row gy-5">
      <div class="content col-xl-5 d-flex flex-column" data-aos="fade-up" data-aos-delay="100">
        <h3>Your Premier Apple Product Destination</h3>
        <p>
          D-Shop is your ultimate destination for all things Apple. We're passionate about bringing the latest and most innovative Apple products directly to tech enthusiasts and professionals. Our mission is to provide an unparalleled shopping experience with genuine Apple products, expert advice, and exceptional customer service.
        </p>
        <a href="/about" class="about-btn align-self-center align-self-xl-start">
          <span>Learn More</span> <i class="bi bi-chevron-right"></i>
        </a>
      </div>

      <div class="col-xl-7" data-aos="fade-up" data-aos-delay="200">
        <div class="row gy-4">
          <div class="col-md-6 icon-box position-relative">
            <i class="bi bi-phone"></i>
            <h4><a href="" class="stretched-link">Comprehensive Apple Range</a></h4>
            <p>From iPhones to MacBooks, we offer the complete lineup of Apple devices with the latest models and configurations.</p>
          </div>

          <div class="col-md-6 icon-box position-relative">
            <i class="bi bi-shield-check"></i>
            <h4><a href="" class="stretched-link">Authentic Products</a></h4>
            <p>100% genuine Apple products with official warranty and direct manufacturer support.</p>
          </div>

          <div class="col-md-6 icon-box position-relative">
            <i class="bi bi-headphones"></i>
            <h4><a href="" class="stretched-link">Expert Support</a></h4>
            <p>Our tech-savvy team provides personalized advice to help you find the perfect Apple device.</p>
          </div>

          <div class="col-md-6 icon-box position-relative">
            <i class="bi bi-truck"></i>
            <h4><a href="" class="stretched-link">Fast Delivery</a></h4>
            <p>Quick and secure shipping across the country, ensuring your new Apple product reaches you swiftly.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Services Section -->
<section id="services" class="services section">
  <div class="container section-title" data-aos="fade-up">
    <h2>Our Products</h2>
    <p>Explore Our <span class="description-title">Device Categories</span></p>
  </div>

  <div class="container">
    <div class="row gy-4">
      <div class="col-xl-3 col-md-6 d-flex" data-aos="fade-up" data-aos-delay="100">
        <div class="service-item position-relative">
          <div class="icon"><i class="bi bi-phone icon"></i></div>
          <h4><a href="/product/?search=&category=Handphone&sort=" class="stretched-link">Smartphones</a></h4>
          <p>Latest iPhone models with cutting-edge technology</p>
        </div>
      </div>

      <div class="col-xl-3 col-md-6 d-flex" data-aos="fade-up" data-aos-delay="200">
        <div class="service-item position-relative">
          <div class="icon"><i class="bi bi-tablet icon"></i></div>
          <h4><a href="/product/?search=&category=Tablet&sort=" class="stretched-link">Tablets</a></h4>
          <p>iPad series for work and entertainment</p>
        </div>
      </div>

      <div class="col-xl-3 col-md-6 d-flex" data-aos="fade-up" data-aos-delay="300">
        <div class="service-item position-relative">
            <div class="icon"><i class="bi bi-laptop icon"></i></div>
            <h4><a href="/product/?search=&category=Laptop&sort=" class="stretched-link">Laptops</a></h4>
            <p>MacBook series for professionals and creators</p>
        </div>
      </div>

      <div class="col-xl-3 col-md-6 d-flex" data-aos="fade-up" data-aos-delay="400">
        <div class="service-item position-relative">
          <div class="icon"><i class="bi bi-headphones icon"></i></div>
          <h4><a href="/product/?search=&category=Accessories&sort=" class="stretched-link">Accessories</a></h4>
          <p>AirPods and premium device accessories</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Features Section -->
<section id="features" class="features section">
  <div class="container">
    <div class="row gy-4">
      <div class="col-lg-3 col-md-4" data-aos="fade-up" data-aos-delay="100">
        <div class="features-item">
          <i class="bi bi-phone" style="color: #ffbb2c;"></i>
          <h3><a href="/product/1/" class="stretched-link">iPhone 15</a></h3>
        </div>
      </div>

      <div class="col-lg-3 col-md-4" data-aos="fade-up" data-aos-delay="200">
        <div class="features-item">
          <i class="bi bi-phone" style="color: #5578ff;"></i>
          <h3><a href="/product/4/" class="stretched-link">iPhone 15 Pro</a></h3>
        </div>
      </div>

      <div class="col-lg-3 col-md-4" data-aos="fade-up" data-aos-delay="300">
        <div class="features-item">
          <i class="bi bi-laptop" style="color: #e80368;"></i>
          <h3><a href="/product/10/" class="stretched-link">Macbook Pro M3</a></h3>
        </div>
      </div>

      <div class="col-lg-3 col-md-4" data-aos="fade-up" data-aos-delay="400">
        <div class="features-item">
          <i class="bi bi-laptop" style="color: #e361ff;"></i>
          <h3><a href="/product/7/" class="stretched-link">Macbook Air M3</a></h3>
        </div>
      </div>

      <!-- Tambahkan item fitur lainnya dengan produk Apple/Samsung -->
    </div>
  </div>
</section>

<!-- Call To Action Section -->
<section id="call-to-action" class="call-to-action section dark-background">
  <img src="static/assets/img/cta-bg.jpg" alt="">
  <div class="container">
    <div class="row justify-content-center" data-aos="zoom-in" data-aos-delay="100">
      <div class="col-xl-10">
        <div class="text-center">
          <h3>Upgrade Your Tech</h3>
          <p>Temukan perangkat terbaru dari Apple dan Samsung. Dapatkan teknologi mutakhir dengan harga terbaik dan promo menarik!</p>
          <a class="cta-btn" href="/product">Shop Now</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Portfolio Section -->
<section id="portfolio" class="portfolio section">

  {% for product, range, nSlides in allProds %}
<section id="portfolio" class="portfolio section">
  <div class="container section-title" data-aos="fade-up">
    <h2>{{ product.0.category|capfirst }} Products</h2>
    <p><span>Explore</span> <span class="description-title">{{ product.0.category|capfirst }} Collection</span></p>
  </div>

  <div class="container">
    <div class="row gy-4 isotope-container" data-aos="fade-up" data-aos-delay="200">
      {% for i in product %}
      <div class="col-lg-4 col-md-6 portfolio-item isotope-item filter-app">
        <a href="{% url 'detail-product' product_id=i.id %}">
          <img src="/media/{{ i.image }}" class="img-fluid" alt="{{ i.product_name }}">
        </a>
        <div class="portfolio-info">
          <h4>{{ i.product_name }}</h4>
          <p>{{ i.desc|slice:":50" }}...</p>
          <h6 class="mb-3">${{ i.price }}</h6>
          
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
{% endfor %}

<!-- Tambahkan di akhir halaman, sebelum penutup script -->
<div id="product-info" style="display:none;">
  {% for product, range, nSlides in allProds %}
      {% for i in product %}
          <div id="namepr{{ i.id }}">{{ i.product_name }}</div>
          <div id="pricepr{{ i.id }}">{{ i.price }}</div>
      {% endfor %}
  {% endfor %}
</div>

<style>
.cart-btn {
  display: inline-flex;
  align-items: center;
  gap: 5px;
}
.portfolio-info .btn {
  padding: 6px 12px;
  font-size: 0.85rem;
}
</style>

</section><!-- /Portfolio Section -->
<!-- Faq Section -->
<section id="faq" class="faq section">
  <!-- Section Title -->
  <div class="container section-title" data-aos="fade-up">
    <h2>Frequently Asked Questions</h2>
    <p><span>Need Help?</span> <span class="description-title">Common Questions About D-Shop</span></p>
  </div>

  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10" data-aos="fade-up" data-aos-delay="100">
        <div class="faq-container">
          <div class="faq-item faq-active">
            <h3>Are all products at D-Shop genuine Apple products?</h3>
            <div class="faq-content">
              <p>Yes, we guarantee 100% authentic Apple products. All our devices are sourced directly from authorized Apple distributors and come with full manufacturer warranty.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div>

          <div class="faq-item">
            <h3>Do you offer warranty on Apple products?</h3>
            <div class="faq-content">
              <p>Every Apple product purchased from D-Shop comes with the standard Apple manufacturer warranty. We also provide additional support and assistance for all your purchases.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div>

          <div class="faq-item">
            <h3>What payment methods do you accept?</h3>
            <div class="faq-content">
              <p>We accept multiple payment methods including credit/debit cards, bank transfer, and popular digital payment platforms to make your shopping experience convenient.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div>

          <div class="faq-item">
            <h3>How long does shipping take?</h3>
            <div class="faq-content">
              <p>We offer fast shipping across the country. Typically, delivery takes 2-5 business days depending on your location. We also provide tracking information for all orders.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div>

          <div class="faq-item">
            <h3>Do you offer product installation or setup assistance?</h3>
            <div class="faq-content">
              <p>Yes! Our tech support team can help you with initial device setup, data transfer, and answer any questions you might have about your new Apple product.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div>

          <div class="faq-item">
            <h3>Can I return or exchange a product?</h3>
            <div class="faq-content">
              <p>We offer a 14-day return and exchange policy for unused products in original condition. Our customer service team will guide you through the process if needed.</p>
            </div>
            <i class="faq-toggle bi bi-chevron-right"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Inisialisasi cart dari localStorage
    var cart = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : {};
    
    console.log('Existing cart:', cart);
    
    // Update cart badge dan popover
    updateCart(cart);

    // Event listener untuk tombol cart
    $('.divpr').on('click', 'button.cart', function() {
        var idstr = this.id.toString();

        if (cart[idstr] !== undefined) {
            cart[idstr][0] += 1;
        } else {
            var qty = 1;
            var name = document.getElementById('namepr' + idstr.slice(2)).innerHTML;
            var price = document.getElementById('pricepr' + idstr.slice(2)).innerHTML;
            cart[idstr] = [qty, name, price];
        }

        updateCart(cart);
    });

    function updateCart(cart) {
        var sum = 0;
        for (var item in cart) {
            sum += cart[item][0];
        }

        // Update cart badge
        var cartBadge = document.getElementById('cart');
        if (cartBadge) {
            cartBadge.innerHTML = sum;
        }

        // Simpan ke localStorage
        localStorage.setItem('cart', JSON.stringify(cart));

        // Update popover
        updatePopover(cart);
    }

    function updatePopover(cart) {
        var popStr = "<h5>Cart for your items in my shopping cart</h5>";
        var i = 1;
        var totalItems = 0;

        if (Object.keys(cart).length === 0) {
            popStr += "<p>Your cart is empty</p>";
        } else {
            for (var item in cart) {
                var productNameElement = document.getElementById('namepr' + item.slice(2));
                var productName = productNameElement ? productNameElement.innerHTML.slice(0, 19) : 'Unknown Product';
                
                popStr += "<b>" + i + "</b> " + productName + " Qty: " + cart[item][0] + "<br>";
                
                totalItems += cart[item][0];
                i++;
            }

            popStr += `
            <div class="cart-actions mt-2 d-flex justify-content-between">
                <a href='/checkout' class='btn btn-success btn-sm'>Checkout</a>
                <a href='#' id='clearCartBtn' class='btn btn-danger btn-sm'>Clear Cart</a>
            </div>
            `;
        }

        var popcartElement = document.getElementById('popcart');
        if (popcartElement) {
            popcartElement.setAttribute('data-content', popStr);
            $('#popcart').popover('show');
            popcartElement.click();
        }
    }

    // Event listener untuk clear cart
    $(document).on('click', '#clearCartBtn', function(e) {
        e.preventDefault();
        clearCart();
    });

    function clearCart() {
        // Reset cart
        cart = {};
        
        // Update localStorage
        localStorage.removeItem('cart');
        
        // Update cart
        updateCart(cart);
        
        // Sembunyikan popover
        $('#popcart').popover('hide');
    }

    // Event listener untuk tombol plus dan minus
    $('.divpr').on("click", "button.minus", function() {
        var a = this.id.slice(7);
        
        if (cart['pr' + a]) {
            cart['pr' + a][0] -= 1;
            
            if (cart['pr' + a][0] <= 0) {
                delete cart['pr' + a];
            }
            
            updateCart(cart);
        }
    });

    $('.divpr').on("click", "button.plus", function() {
        var a = this.id.slice(6);
        
        if (!cart['pr' + a]) {
            var qty = 1;
            var name = document.getElementById('namepr' + a).innerHTML;
            var price = document.getElementById('pricepr' + a).innerHTML;
            cart['pr' + a] = [qty, name, price];
        } else {
            cart['pr' + a][0] += 1;
        }
        
        updateCart(cart);
    });
});
</script>


{% endblock body %}